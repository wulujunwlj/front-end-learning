!function(a){"use strict"}(window),function(a){var b="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){b.Backbone=a(b,e,c,d)});else if("undefined"!=typeof exports){var c,d=require("underscore");try{c=require("jquery")}catch(e){}a(b,exports,d,c)}else b.Backbone=a(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)}(function(a,b,c,d){var e=a.Backbone,f=Array.prototype.slice;b.VERSION="1.2.3",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var g=function(a,b,d){switch(a){case 1:return function(){return c[b](this[d])};case 2:return function(a){return c[b](this[d],a)};case 3:return function(a,e){return c[b](this[d],i(a,this),e)};case 4:return function(a,e,f){return c[b](this[d],i(a,this),e,f)};default:return function(){var a=f.call(arguments);return a.unshift(this[d]),c[b].apply(c,a)}}},h=function(a,b,d){c.each(b,function(b,e){c[e]&&(a.prototype[e]=g(b,e,d))})},i=function(a,b){return c.isFunction(a)?a:c.isObject(a)&&!b._isModel(a)?j(a):c.isString(a)?function(b){return b.get(a)}:a},j=function(a){var b=c.matches(a);return function(a){return b(a.attributes)}},k=b.Events={},l=/\s+/,m=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d){void 0!==e&&"context"in f&&void 0===f.context&&(f.context=e);for(g=c.keys(d);h<g.length;h++)b=m(a,b,g[h],d[g[h]],f)}else if(d&&l.test(d))for(g=d.split(l);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};k.on=function(a,b,c){return n(this,a,b,c)};var n=function(a,b,c,d,e){if(a._events=m(o,a._events||{},b,c,{context:d,ctx:a,listening:e}),e){var f=a._listeners||(a._listeners={});f[e.id]=e}return a};k.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),g=f[e];if(!g){var h=this._listenId||(this._listenId=c.uniqueId("l"));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0}}return n(a,b,d,this,g),this};var o=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a};k.off=function(a,b,c){return this._events?(this._events=m(p,this._events,a,b,{context:c,listeners:this._listeners}),this):this},k.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this)}return c.isEmpty(e)&&(this._listeningTo=void 0),this};var p=function(a,b,d,e){if(a){var f,g=0,h=e.context,i=e.listeners;if(b||d||h){for(var j=b?[b]:c.keys(a);g<j.length;g++){b=j[g];var k=a[b];if(!k)break;for(var l=[],m=0;m<k.length;m++){var n=k[m];d&&d!==n.callback&&d!==n.callback._callback||h&&h!==n.context?l.push(n):(f=n.listening,f&&0===--f.count&&(delete i[f.id],delete f.listeningTo[f.objId]))}l.length?a[b]=l:delete a[b]}return c.size(a)?a:void 0}for(var o=c.keys(i);g<o.length;g++)f=i[o[g]],delete i[f.id],delete f.listeningTo[f.objId]}};k.once=function(a,b,d){var e=m(q,{},a,b,c.bind(this.off,this));return this.on(e,void 0,d)},k.listenToOnce=function(a,b,d){var e=m(q,{},b,d,c.bind(this.stopListening,this,a));return this.listenTo(a,e)};var q=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};k.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;b>d;d++)c[d]=arguments[d+1];return m(r,this._events,a,void 0,c),this};var r=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&s(e,d),f&&s(f,[b].concat(d))}return a},s=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}};k.bind=k.on,k.unbind=k.off,c.extend(b,k);var t=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(t.prototype,k,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){if(null==a)return this;var e;if("object"==typeof a?(e=a,d=b):(e={})[a]=b,d||(d={}),!this._validate(e,d))return!1;var f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=c.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;for(var m in e)b=e[m],c.isEqual(j[m],b)||h.push(m),c.isEqual(l[m],b)?delete k[m]:k[m]=b,f?delete j[m]:j[m]=b;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!g){h.length&&(this._pending=d);for(var n=0;n<h.length;n++)this.trigger("change:"+h[n],this,j[h[n]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b=this._changing?this._previousAttributes:this.attributes,d={};for(var e in a){var f=a[e];c.isEqual(b[e],f)||(d[e]=f)}return c.size(d)?d:!1},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=c.extend({parse:!0},a);var b=this,d=a.success;return a.success=function(c){var e=a.parse?b.parse(c,a):c;return b.set(e,a)?(d&&d.call(a.context,b,c,a),void b.trigger("sync",b,c,a)):!1},P(this,a),this.sync("read",this,a)},save:function(a,b,d){var e;null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0,parse:!0},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;return f&&(b=c.extend({},e,b)),b&&!g.set(b,d)?!1:(h&&h.call(d.context,g,a,d),void g.trigger("sync",g,a,d))},P(this,d),e&&f&&(this.attributes=c.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(P(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||O();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.defaults({validate:!0},a))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var u={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(t,u,"attributes");var v=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},y=function(a,b,c){c=Math.min(Math.max(c,0),a.length);var d,e=Array(a.length-c),f=b.length;for(d=0;d<e.length;d++)e[d]=a[d+c];for(d=0;f>d;d++)a[d+c]=b[d];for(d=0;d<e.length;d++)a[d+f+c]=e[d]};c.extend(v.prototype,k,{model:t,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,x))},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:a.slice();var e=this._removeModels(a,b);return!b.silent&&e.length&&this.trigger("update",this,b),d?e[0]:e},set:function(a,b){if(null!=a){b=c.defaults({},b,w),b.parse&&!this._isModel(a)&&(a=this.parse(a,b)||[]);var d=!c.isArray(a);a=d?[a]:a.slice();var e=b.at;null!=e&&(e=+e),0>e&&(e+=this.length+1);var f,g,h=[],i=[],j=[],k={},l=b.add,m=b.merge,n=b.remove,o=!1,p=this.comparator&&null==e&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null;for(g=0;g<a.length;g++){f=a[g];var r=this.get(f);if(r){if(m&&f!==r){var s=this._isModel(f)?f.attributes:f;b.parse&&(s=r.parse(s,b)),r.set(s,b),p&&!o&&(o=r.hasChanged(q))}k[r.cid]||(k[r.cid]=!0,h.push(r)),a[g]=r}else l&&(f=a[g]=this._prepareModel(f,b),f&&(i.push(f),this._addReference(f,b),k[f.cid]=!0,h.push(f)))}if(n){for(g=0;g<this.length;g++)f=this.models[g],k[f.cid]||j.push(f);j.length&&this._removeModels(j,b)}var t=!1,u=!p&&l&&n;if(h.length&&u?(t=this.length!==h.length||c.some(this.models,function(a,b){return a!==h[b]}),this.models.length=0,y(this.models,h,0),this.length=this.models.length):i.length&&(p&&(o=!0),y(this.models,i,null==e?this.length:e),this.length=this.models.length),o&&this.sort({silent:!0}),!b.silent){for(g=0;g<i.length;g++)null!=e&&(b.index=e+g),f=i[g],f.trigger("add",f,this,b);(o||t)&&this.trigger("sort",this,b),(i.length||j.length)&&this.trigger("update",this,b)}return d?a[0]:a}},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return f.apply(this.models,arguments)},get:function(a){if(null==a)return void 0;var b=this.modelId(this._isModel(a)?a.attributes:a);return this._byId[a]||this._byId[b]||this._byId[a.cid]},has:function(a){return null!=this.get(a)},at:function(a){return 0>a&&(a+=this.length),this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var b=this.comparator;if(!b)throw new Error("Cannot sort a set without a comparator");a||(a={});var d=b.length;return c.isFunction(b)&&(b=c.bind(b,this)),1===d||c.isString(b)?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return this.map(a+"")},fetch:function(a){a=c.extend({parse:!0},a);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},P(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;if(a=this._prepareModel(a,b),!a)return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,delete this._byId[e.cid];var g=this.modelId(e.attributes);null!=g&&delete this._byId[g],b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return c},_isModel:function(a){return a instanceof t},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(b){if(("add"===a||"remove"===a)&&c!==this)return;if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}}this.trigger.apply(this,arguments)}});var z={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};h(v,z,"models");var A=b.View=function(a){this.cid=c.uniqueId("view"),c.extend(this,c.pick(a,C)),this._ensureElement(),this.initialize.apply(this,arguments)},B=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];c.extend(A.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=c.result(this,"events")),!a)return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[d]),d){var e=b.match(B);this.delegate(e[1],e[2],c.bind(d,this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),b.sync=function(a,d,e){var f=D[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||O()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var E=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,H=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(E.prototype,k,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g,d)!==!1&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(I,"\\$&").replace(F,"(?:$1)?").replace(G,function(a,b){return b?a:"([^/?]+)"}).replace(H,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var J=b.History=function(){this.handlers=[],this.checkUrl=c.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},K=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,M=/#.*$/;J.started=!1,c.extend(J.prototype,k,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.getSearch()},matchRoot:function(){var a=this.decodeFragment(this.location.pathname),b=a.slice(0,this.root.length-1)+"/";return b===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(K,"")},start:function(a){if(J.started)throw new Error("Backbone.history has already been started");if(J.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(L,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};return this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),J.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return this.matchRoot()?(a=this.fragment=this.getFragment(a),c.some(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})):!1},navigate:function(a,b){if(!J.started)return!1;b&&b!==!0||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;(""===a||"?"===a.charAt(0))&&(c=c.slice(0,-1)||"/");var d=c+a;if(a=this.decodeFragment(a.replace(M,"")),this.fragment!==a){if(this.fragment=a,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var e=this.iframe.contentWindow;b.replace||(e.document.open(),e.document.close()),this._updateHash(e.location,a,b.replace)}}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new J;var N=function(a,b){var d,e=this;return d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b),d.prototype=c.create(e.prototype,a),d.prototype.constructor=d,d.__super__=e.prototype,d};t.extend=v.extend=E.extend=A.extend=J.extend=N;var O=function(){throw new Error('A "url" property or function must be specified')},P=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b}),function(){var a="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this,b=a._,c=Array.prototype,d=Object.prototype,e=c.push,f=c.slice,g=d.toString,h=d.hasOwnProperty,i=Array.isArray,j=Object.keys,k=Object.create,l=function(){},m=function(a){return a instanceof m?a:this instanceof m?void(this._wrapped=a):new m(a)};"undefined"==typeof exports||exports.nodeType?a._=m:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=m),exports._=m),m.VERSION="1.8.3";var n=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},o=function(a,b,c){return null==a?m.identity:m.isFunction(a)?n(a,b,c):m.isObject(a)?m.matcher(a):m.property(a)};m.iteratee=function(a,b){return o(a,b,1/0)};var p=function(a,b){return b=null==b?a.length-1:+b,function(){for(var c=Math.max(arguments.length-b,0),d=Array(c),e=0;c>e;e++)d[e]=arguments[e+b];switch(b){case 0:return a.call(this,d);case 1:return a.call(this,arguments[0],d);case 2:return a.call(this,arguments[0],arguments[1],d)}var f=Array(b+1);for(e=0;b>e;e++)f[e]=arguments[e];return f[b]=d,a.apply(this,f)}},q=function(a){if(!m.isObject(a))return{};if(k)return k(a);l.prototype=a;var b=new l;return l.prototype=null,b},r=function(a){return function(b){return null==b?void 0:b[a]}},s=Math.pow(2,53)-1,t=r("length"),u=function(a){var b=t(a);return"number"==typeof b&&b>=0&&s>=b};m.each=m.forEach=function(a,b,c){b=n(b,c);var d,e;if(u(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=m.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},m.map=m.collect=function(a,b,c){b=o(b,c);for(var d=!u(a)&&m.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f};var v=function(a){var b=function(b,c,d,e){var f=!u(b)&&m.keys(b),g=(f||b).length,h=a>0?0:g-1;for(e||(d=b[f?f[h]:h],h+=a);h>=0&&g>h;h+=a){var i=f?f[h]:h;d=c(d,b[i],i,b)}return d};return function(a,c,d,e){var f=arguments.length>=3;return b(a,n(c,e,4),d,f)}};m.reduce=m.foldl=m.inject=v(1),m.reduceRight=m.foldr=v(-1),m.find=m.detect=function(a,b,c){var d;return d=u(a)?m.findIndex(a,b,c):m.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},m.filter=m.select=function(a,b,c){var d=[];return b=o(b,c),m.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},m.reject=function(a,b,c){return m.filter(a,m.negate(o(b)),c)},m.every=m.all=function(a,b,c){b=o(b,c);for(var d=!u(a)&&m.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},m.some=m.any=function(a,b,c){b=o(b,c);for(var d=!u(a)&&m.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},m.contains=m.includes=m.include=function(a,b,c,d){return u(a)||(a=m.values(a)),("number"!=typeof c||d)&&(c=0),m.indexOf(a,b,c)>=0},m.invoke=p(function(a,b,c){var d=m.isFunction(b);return m.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})}),m.pluck=function(a,b){return m.map(a,m.property(b))},m.where=function(a,b){return m.filter(a,m.matcher(b))},m.findWhere=function(a,b){return m.find(a,m.matcher(b))},m.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=u(a)?a:m.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],null!=d&&d>f&&(f=d)}else b=o(b,c),m.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},m.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=u(a)?a:m.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],null!=d&&f>d&&(f=d)}else b=o(b,c),m.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},m.shuffle=function(a){return m.sample(a,1/0)},m.sample=function(a,b,c){if(null==b||c)return u(a)||(a=m.values(a)),a[m.random(a.length-1)];var d=u(a)?m.clone(a):m.values(a),e=t(d);b=Math.max(Math.min(b,e),0);for(var f=e-1,g=0;b>g;g++){var h=m.random(g,f),i=d[g];d[g]=d[h],d[h]=i}return d.slice(0,b)},m.sortBy=function(a,b,c){var d=0;return b=o(b,c),m.pluck(m.map(a,function(a,c,e){return{value:a,index:d++,criteria:b(a,c,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var w=function(a,b){return function(c,d,e){var f=b?[[],[]]:{};return d=o(d,e),m.each(c,function(b,e){var g=d(b,e,c);a(f,b,g)}),f}};m.groupBy=w(function(a,b,c){m.has(a,c)?a[c].push(b):a[c]=[b]}),m.indexBy=w(function(a,b,c){a[c]=b}),m.countBy=w(function(a,b,c){m.has(a,c)?a[c]++:a[c]=1});var x=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;m.toArray=function(a){return a?m.isArray(a)?f.call(a):m.isString(a)?a.match(x):u(a)?m.map(a,m.identity):m.values(a):[]},m.size=function(a){return null==a?0:u(a)?a.length:m.keys(a).length},m.partition=w(function(a,b,c){a[c?0:1].push(b)},!0),m.first=m.head=m.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:m.initial(a,a.length-b)},m.initial=function(a,b,c){return f.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},m.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:m.rest(a,Math.max(0,a.length-b))},m.rest=m.tail=m.drop=function(a,b,c){return f.call(a,null==b||c?1:b)},m.compact=function(a){return m.filter(a,m.identity)};var y=function(a,b,c,d){d=d||[];for(var e=d.length,f=0,g=t(a);g>f;f++){var h=a[f];if(u(h)&&(m.isArray(h)||m.isArguments(h)))if(b)for(var i=0,j=h.length;j>i;)d[e++]=h[i++];else y(h,b,c,d),e=d.length;else c||(d[e++]=h)}return d};m.flatten=function(a,b){return y(a,b,!1)},m.without=p(function(a,b){return m.difference(a,b)}),m.uniq=m.unique=function(a,b,c,d){m.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=o(c,d));for(var e=[],f=[],g=0,h=t(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?m.contains(f,j)||(f.push(j),e.push(i)):m.contains(e,i)||e.push(i)}return e},m.union=p(function(a){return m.uniq(y(a,!0,!0))}),m.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=t(a);e>d;d++){var f=a[d];if(!m.contains(b,f)){var g;for(g=1;c>g&&m.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},m.difference=p(function(a,b){return b=y(b,!0,!0),m.filter(a,function(a){return!m.contains(b,a)})}),m.unzip=function(a){for(var b=a&&m.max(a,t).length||0,c=Array(b),d=0;b>d;d++)c[d]=m.pluck(a,d);return c},m.zip=p(m.unzip),m.object=function(a,b){for(var c={},d=0,e=t(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};var z=function(a){return function(b,c,d){c=o(c,d);for(var e=t(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}};m.findIndex=z(1),m.findLastIndex=z(-1),m.sortedIndex=function(a,b,c,d){c=o(c,d,1);for(var e=c(b),f=0,g=t(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f};var A=function(a,b,c){return function(d,e,g){var h=0,i=t(d);if("number"==typeof g)a>0?h=g>=0?g:Math.max(g+i,h):i=g>=0?Math.min(g+1,i):g+i+1;else if(c&&g&&i)return g=c(d,e),d[g]===e?g:-1;if(e!==e)return g=b(f.call(d,h,i),m.isNaN),g>=0?g+h:-1;for(g=a>0?h:i-1;g>=0&&i>g;g+=a)if(d[g]===e)return g;return-1}};m.indexOf=A(1,m.findIndex,m.sortedIndex),m.lastIndexOf=A(-1,m.findLastIndex),m.range=function(a,b,c){null==b&&(b=a||0,a=0),c||(c=a>b?-1:1);for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e},m.chunk=function(a,b){if(null==b||1>b)return[];for(var c=[],d=0,e=a.length;e>d;)c.push(f.call(a,d,d+=b));return c};var B=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=q(a.prototype),g=a.apply(f,e);return m.isObject(g)?g:f};m.bind=p(function(a,b,c){if(!m.isFunction(a))throw new TypeError("Bind must be called on a function");var d=p(function(e){return B(a,d,b,this,c.concat(e))});return d}),m.partial=p(function(a,b){var c=m.partial.placeholder,d=function(){for(var e=0,f=b.length,g=Array(f),h=0;f>h;h++)g[h]=b[h]===c?arguments[e++]:b[h];for(;e<arguments.length;)g.push(arguments[e++]);return B(a,d,this,this,g)};return d}),m.partial.placeholder=m,m.bindAll=p(function(a,b){b=y(b,!1,!1);var c=b.length;if(1>c)throw new Error("bindAll must be passed function names");for(;c--;){var d=b[c];a[d]=m.bind(a[d],a)}}),m.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return m.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},m.delay=p(function(a,b,c){return setTimeout(function(){return a.apply(null,c)},b)}),m.defer=m.partial(m.delay,m,1),m.throttle=function(a,b,c){var d,e,f,g,h=0;c||(c={});var i=function(){h=c.leading===!1?0:m.now(),d=null,g=a.apply(e,f),d||(e=f=null)},j=function(){var j=m.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return e=this,f=arguments,0>=k||k>b?(d&&(clearTimeout(d),d=null),h=j,g=a.apply(e,f),d||(e=f=null)):d||c.trailing===!1||(d=setTimeout(i,k)),g};return j.cancel=function(){clearTimeout(d),h=0,d=e=f=null},j},m.debounce=function(a,b,c){var d,e,f=function(b,c){d=null,c&&(e=a.apply(b,c))},g=p(function(g){var h=c&&!d;return d&&clearTimeout(d),h?(d=setTimeout(f,b),e=a.apply(this,g)):c||(d=m.delay(f,b,this,g)),e});return g.cancel=function(){clearTimeout(d),d=null},g},m.wrap=function(a,b){return m.partial(b,a)},m.negate=function(a){return function(){return!a.apply(this,arguments)}},m.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},m.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},m.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),
c}},m.once=m.partial(m.before,2),m.restArgs=p;var C=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],E=function(a,b){var c=D.length,e=a.constructor,f=m.isFunction(e)&&e.prototype||d,g="constructor";for(m.has(a,g)&&!m.contains(b,g)&&b.push(g);c--;)g=D[c],g in a&&a[g]!==f[g]&&!m.contains(b,g)&&b.push(g)};m.keys=function(a){if(!m.isObject(a))return[];if(j)return j(a);var b=[];for(var c in a)m.has(a,c)&&b.push(c);return C&&E(a,b),b},m.allKeys=function(a){if(!m.isObject(a))return[];var b=[];for(var c in a)b.push(c);return C&&E(a,b),b},m.values=function(a){for(var b=m.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},m.mapObject=function(a,b,c){b=o(b,c);for(var d=m.keys(a),e=d.length,f={},g=0;e>g;g++){var h=d[g];f[h]=b(a[h],h,a)}return f},m.pairs=function(a){for(var b=m.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},m.invert=function(a){for(var b={},c=m.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},m.functions=m.methods=function(a){var b=[];for(var c in a)m.isFunction(a[c])&&b.push(c);return b.sort()};var F=function(a,b){return function(c){var d=arguments.length;if(b&&(c=Object(c)),2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}};m.extend=F(m.allKeys),m.extendOwn=m.assign=F(m.keys),m.findKey=function(a,b,c){b=o(b,c);for(var d,e=m.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d};var G=function(a,b,c){return b in c};m.pick=p(function(a,b){var c={},d=b[0];if(null==a)return c;m.isFunction(d)?(b.length>1&&(d=n(d,b[1])),b=m.allKeys(a)):(d=G,b=y(b,!1,!1),a=Object(a));for(var e=0,f=b.length;f>e;e++){var g=b[e],h=a[g];d(h,g,a)&&(c[g]=h)}return c}),m.omit=p(function(a,b){var c,d=b[0];return m.isFunction(d)?(d=m.negate(d),b.length>1&&(c=b[1])):(b=m.map(y(b,!1,!1),String),d=function(a,c){return!m.contains(b,c)}),m.pick(a,d,c)}),m.defaults=F(m.allKeys,!0),m.create=function(a,b){var c=q(a);return b&&m.extendOwn(c,b),c},m.clone=function(a){return m.isObject(a)?m.isArray(a)?a.slice():m.extend({},a):a},m.tap=function(a,b){return b(a),a},m.isMatch=function(a,b){var c=m.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var H,I;H=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;if(a!==a)return b!==b;var e=typeof a;return"function"!==e&&"object"!==e&&"object"!=typeof b?!1:I(a,b,c,d)},I=function(a,b,c,d){a instanceof m&&(a=a._wrapped),b instanceof m&&(b=b._wrapped);var e=g.call(a);if(e!==g.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var h=a.constructor,i=b.constructor;if(h!==i&&!(m.isFunction(h)&&h instanceof h&&m.isFunction(i)&&i instanceof i)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var j=c.length;j--;)if(c[j]===a)return d[j]===b;if(c.push(a),d.push(b),f){if(j=a.length,j!==b.length)return!1;for(;j--;)if(!H(a[j],b[j],c,d))return!1}else{var k,l=m.keys(a);if(j=l.length,m.keys(b).length!==j)return!1;for(;j--;)if(k=l[j],!m.has(b,k)||!H(a[k],b[k],c,d))return!1}return c.pop(),d.pop(),!0},m.isEqual=function(a,b){return H(a,b)},m.isEmpty=function(a){return null==a?!0:u(a)&&(m.isArray(a)||m.isString(a)||m.isArguments(a))?0===a.length:0===m.keys(a).length},m.isElement=function(a){return!(!a||1!==a.nodeType)},m.isArray=i||function(a){return"[object Array]"===g.call(a)},m.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},m.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol"],function(a){m["is"+a]=function(b){return g.call(b)==="[object "+a+"]"}}),m.isArguments(arguments)||(m.isArguments=function(a){return m.has(a,"callee")});var J=a.document&&a.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof J&&(m.isFunction=function(a){return"function"==typeof a||!1}),m.isFinite=function(a){return!m.isSymbol(a)&&isFinite(a)&&!isNaN(parseFloat(a))},m.isNaN=function(a){return m.isNumber(a)&&isNaN(a)},m.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===g.call(a)},m.isNull=function(a){return null===a},m.isUndefined=function(a){return void 0===a},m.has=function(a,b){return null!=a&&h.call(a,b)},m.noConflict=function(){return a._=b,this},m.identity=function(a){return a},m.constant=function(a){return function(){return a}},m.noop=function(){},m.property=r,m.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},m.matcher=m.matches=function(a){return a=m.extendOwn({},a),function(b){return m.isMatch(b,a)}},m.times=function(a,b,c){var d=Array(Math.max(0,a));b=n(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},m.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},m.now=Date.now||function(){return(new Date).getTime()};var K={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=m.invert(K),M=function(a){var b=function(b){return a[b]},c="(?:"+m.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};m.escape=M(K),m.unescape=M(L),m.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),m.isFunction(d)?d.call(a):d};var N=0;m.uniqueId=function(a){var b=++N+"";return a?a+b:b},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Q=/\\|'|\r|\n|\u2028|\u2029/g,R=function(a){return"\\"+P[a]};m.template=function(a,b,c){!b&&c&&(b=c),b=m.defaults({},b,m.templateSettings);var d=RegExp([(b.escape||O).source,(b.interpolate||O).source,(b.evaluate||O).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(Q,R),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";var g;try{g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,m)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},m.chain=function(a){var b=m(a);return b._chain=!0,b};var S=function(a,b){return a._chain?m(b).chain():b};m.mixin=function(a){m.each(m.functions(a),function(b){var c=m[b]=a[b];m.prototype[b]=function(){var a=[this._wrapped];return e.apply(a,arguments),S(this,c.apply(m,a))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=c[a];m.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],S(this,c)}}),m.each(["concat","join","slice"],function(a){var b=c[a];m.prototype[a]=function(){return S(this,b.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}();